{% extends "base.html" %}

{% block title %}Tournament Manager{% endblock %}

{% block header_text %}Marvel Rivals Tournament Manager{% endblock %}

{% block style %}
{% endblock %}

{% block main %}
<h1>Tournament——{{ tournament.title }}</h1>
<p>{{ tournament.description }}</p>
<p>Start Time: {{ tournament.start_time.strftime('%Y-%m-%d %H:%M') }}</p>
<p>Visibility: {{ tournament.visibility.visibility }}</p>

{% for team in teams %}
<p>{{ team.team_name }}</p>
{% endfor %}
<h2 class="mt-4">Games in This Tournament</h2>

{% if games %}
  <div class="table-responsive">
    <table class="table table-striped table-bordered">
      <thead class="table-dark">
        <tr>
          <th>Round</th>
          <th>Team A</th>
          <th>Team B</th>
          <th>Game Mode</th>
          <th>Map</th>
          <th>Result</th>
          <th>Details</th>
        </tr>
      </thead>
      <tbody>
        {% for g in games %}
        <tr>
          <td>{{ g.round }}</td>
          <td>{{ g.team_a.team_name }}</td>
          <td>{{ g.team_b.team_name }}</td>
          <!--<td>{{ g.game_mode.game_mode_name }}</td> -->
          <td>{{ g.map.map_name }}</td>
          <td>
            {% if g.is_draw %}
              Draw
            {% elif g.winning_team == g.team_a.id %}
              {{ g.team_a.team_name }} Wins
            {% elif g.winning_team == g.team_b.id %}
              {{ g.team_b.team_name }} Wins
            {% else %}
              Unknown
            {% endif %}
          </td>
          <td><a href="/tournament/game?id={{ g.id }}">View</a></td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% else %}
  <p>No games found for this tournament.</p>
{% endif %}


{% endblock %}